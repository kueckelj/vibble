% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/vibble-space.R
\name{bb3D}
\alias{bb3D}
\title{Compute 3D bounding box}
\usage{
bb3D(vbl, cond = enquo(), buffer = 0)
}
\arguments{
\item{vbl}{A \link{vibble}.}

\item{cond}{Optional tidy-selection condition used to filter the vibble before computing the bounding box.
Use unquoted expressions, e.g. \code{brain == TRUE}. If omitted, all rows are considered.}

\item{buffer}{Numeric scalar defining how much to expand the bounding box. If \code{buffer >= 1}, it
is interpreted as an absolute number of voxels.If \verb{0 < buffer < 1}, it is interpreted as a
proportion of the axis-specific range.}
}
\value{
A named list of length three (for \code{x}, \code{y}, \code{z}) where each element is a numeric
vector of length two defining the lower and upper limits of the bounding box.
}
\description{
Compute a 3D bounding box (\code{bb3D}) from a vibble by extracting coordinate ranges for the
spatial axes \code{x}, \code{y}, and \code{z}.
}
\details{
The function first filters the vibble using \code{cond} if provided.
For each spatial axis, the range is computed from the voxel coordinates.

If a buffer is supplied, the bounding box is expanded outward.
Proportional buffers (\code{buffer < 1}) are converted to absolute sizes based on the axis-specific range.

Expanded limits are always trimmed to the global coordinate-space limits
defined in the vibble attribute \code{ccs_limits()}.
This ensures bounding boxes never exceed the valid spatial space of the vibble.
}
\note{
Bounding boxes are compatible with \link{filter_bb3D}() and other functions that
require valid 3D limit vectors.
They follow the same structural rules as objects validated by \link{is_bb3D}().
}
\examples{
# Example 1: Bounding box around all voxels
vbl <- example_vbl()
bb <- bb3D(vbl)

# Example 2: Bounding box around tumor region with a proportional buffer
bb_tumor <- bb3D(vbl, cond = tumor == TRUE, buffer = 0.1)

}
\seealso{
\link{filter_bb3D}() for subsetting using bounding boxes.
\link{is_bb3D}() for structure validation.
\link{ccs_limits}() for accessing the global coordinate limits of a vibble.
}
