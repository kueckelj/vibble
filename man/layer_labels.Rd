% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ggvibble-layers.R
\name{layer_labels}
\alias{layer_labels}
\title{Add label annotations to categorical regions}
\usage{
layer_labels(
  var,
  include = NULL,
  exclude = NULL,
  alpha = 0.9,
  color = "white",
  size = 3.5,
  use_dbscan = TRUE,
  centroid = median,
  abbrev = NULL,
  repel = TRUE,
  slices = NULL,
  .cond = NULL,
  .by = "slice",
  ...
)
}
\arguments{
\item{var}{Character. Name of a categorical variable from which to draw the labels.}

\item{include}{Optional character vector of labels to include. If named the
labels are renamed according to \verb{c(<orig label> = <displayed label>)}.}

\item{exclude}{Optional character vector of labels to exclude.}

\item{alpha}{Text alpha (transparency) passed to \code{geom_text()}.}

\item{color}{Text color passed to \code{geom_text()}.}

\item{size}{Text size passed to \code{geom_text()}.}

\item{use_dbscan}{Logical. If \code{TRUE} (default), label voxels within each slice
are clustered using \code{dbscan2D()} before centroid computation; otherwise all
voxels of a label form a single region.}

\item{centroid}{The function with which to compute the centroid label position
based on col and row. A named list of functions can be supplied, where names
must be \emph{c('col', 'row')}.}

\item{abbrev}{Optional function or formula applied to label names for abbreviation.
Should take a and return a character scalar.}

\item{repel}{Logical. If \code{TRUE}, the text is rendered with \link{geom_text_repel}(),
which prevents label overlap. If \code{FALSE}, text ist rendered with \link{geom_text}().}

\item{slices}{Optional. Numeric vector of \link[=is_slice]{slice numbers} used to
restrict the content of this layer to specific slices. If \code{NULL}, no restriction
is applied and the function considers all slices, as denoted in the \link{ggplane}()
container.}

\item{.cond}{A logical filter expression that determines the specific
voxels included in the content of this layer. The expression is evaluated via
\link[rlang:args_data_masking]{data-masking} semantics with the 2D vibble passed
into this layer by \code{ggplane}(). See \link[=vbl_doc_cond]{Details}.}

\item{.by}{A \link[dplyr:dplyr_tidy_select]{tidy-selection} of columns to
group by before applying the filtering logic of \code{.cond}. Defaults to \emph{'slice'}.}

\item{...}{Additional arguments passed to \code{geom_text()} or \code{geom_text_repel()}.}
}
\value{
A \code{ggvibble_layer} object containing the supplied function. When
added to a \code{ggvibble}, the function is executed and its returned layers are
inserted into the plot.
}
\description{
Computes slice-wise centroid positions of categorical label regions and adds
text annotations for each label.
}
\details{
The function identifies, per slice, all occurrences of the categorical variable
specified in \code{var}. Optionally, label sets can be restricted via \code{include}
and/or filtered out via \code{exclude}. If \code{use_dbscan = TRUE}, voxels belonging to
the same label are partitioned into spatial clusters using \code{dbscan2D()}, and
centroids are computed for each cluster to avoid assigning a single label
position to widely separated regions. If \code{use_dbscan = FALSE}, all voxels of a
label within a slice are treated as one region. The resulting centroids are
rendered using \code{geom_text()}. A user-supplied function in \code{abbrev} can modify
displayed label text (e.g., shortening region names).
}
