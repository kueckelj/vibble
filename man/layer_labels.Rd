% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ggvibble-layers.R
\name{layer_labels}
\alias{layer_labels}
\title{Add label annotations to categorical regions}
\usage{
layer_labels(
  var,
  include = NULL,
  exclude = NULL,
  alpha = 0.9,
  color = "white",
  size = 4.5,
  use_dbscan = TRUE,
  abbrev = NULL,
  repel = FALSE,
  centroid = function(x) median(x, TRUE),
  .cond = NULL,
  .by = NULL,
  ...
)
}
\arguments{
\item{var}{Character. Name of a categorical variable to annotate.}

\item{include}{Optional character vector of labels to include. If named the
labels are renamed according to *c('\if{html}{\out{<orig label>}}' = '\if{html}{\out{<displayed label>}}').}

\item{exclude}{Optional character vector of labels to exclude.}

\item{alpha}{Numeric transparency for label text.}

\item{color}{Text color passed to \code{geom_text()}.}

\item{size}{Text size passed to \code{geom_text()}.}

\item{use_dbscan}{Logical. If TRUE, label voxels within each slice are clustered
using \code{dbscan2D()} before centroid computation; otherwise all voxels of a label
form a single region.}

\item{abbrev}{Optional function applied to label names for abbreviation.}

\item{repel}{Logical. If \code{TRUE}, the text is rendered with \link{geom_text_repel}()
else with \link{geom_text}().}

\item{centroid}{The function with which to compute the centroid label position
based on col and row. A named list of functions can be supplied, where names
must be \emph{c('col', 'row')}.}

\item{.cond}{A logical filter expression that determines the specific
voxels for which this layer is drawn. The expression is evaluated via
\link[rlang:args_data_masking]{data-masking} semantics with the 2D vibble passed
into this layer by \code{ggplane}(). See \link[=vbl_doc_cond]{Details}.}

\item{...}{Additional arguments passed to \code{geom_text()} or \code{geom_text_repel()}.}
}
\value{
A \code{ggvibble_layer} object containing the supplied function. When
added to a \code{ggvibble}, the function is executed and its returned layers are
inserted into the plot.
}
\description{
Computes slice-wise centroid positions of categorical label regions and adds
text annotations for each label.
}
\details{
The function identifies, per slice, all occurrences of the categorical variable
specified in \code{var}. Optionally, label sets can be restricted via \code{include}
and/or filtered out via \code{exclude}. If \code{use_dbscan = TRUE}, voxels belonging to
the same label are partitioned into spatial clusters using \code{dbscan2D()}, and
centroids are computed for each cluster to avoid assigning a single label
position to widely separated regions. If \code{use_dbscan = FALSE}, all voxels of a
label within a slice are treated as one region. The resulting centroids are
rendered using \code{geom_text()}. A user-supplied function in \code{abbrev} can modify
displayed label text (e.g., shortening region names).
}
