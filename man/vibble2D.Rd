% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/vibble2D.R
\name{vibble2D}
\alias{vibble2D}
\title{Create a 2D vibble from 3D voxel data}
\usage{
vibble2D(
  vbl,
  plane,
  slices = NULL,
  lim = NULL,
  offset_dist = 0,
  offset_dir = "left",
  cond = enquo()
)
}
\arguments{
\item{vbl}{A \link{vibble}.}

\item{plane}{The anatomical orientation. Valid options are \emph{c('sag', 'axi', 'cor')}.}

\item{slices}{Optional numeric vector of slice positions in the selected \code{plane}
to keep. If \code{NULL}, all slices are retained.}

\item{offset_dist}{Distance by which voxels are shifted along \code{offset_dir} in the 2D plane.
Values \verb{< 1} are interpreted as a proportion of the maximal coordinate,
values \verb{>= 1} as an absolute distance in coordinate units.}

\item{offset_dir}{Direction in which to shift voxels when \code{offset_dist > 0}.
Valid options are \emph{c('left', 'right', 'top', 'bottom')}. A \emph{'-flip'} suffix as
in \emph{'left-flip'} is also valid and flips the slice ordering.}

\item{cond}{An expression evaluated with \link[rlang:args_data_masking]{tidyverse's data-masking}
to filter voxels. If \code{NULL}, all voxels are retained.}
}
\value{
A \code{tibble} with class \code{vbl2D} containing columns \code{col}, \code{row}, \code{slice},
and all remaining variables from \code{vbl}. Attributes store the used plane and any
applied offsets.
}
\description{
Convert a 3D \code{vbl} object into a 2D representation for a given anatomical plane and selected slices. Optionally apply filtering conditions and spatial offsets for visualization.
}
\details{
The function derives the required axes using \link{req_axes_2d}() and
\link{switch_axis_label}(). It then selects the corresponding coordinate columns,
renames them to \code{col}, \code{row}, and \code{slice}, and optionally filters by \code{slices} and \code{cond}.

If \code{offset_dist > 0}, voxels are shifted along the specified \code{offset_dir},
and offset-related attributes are attached.

Internally, summary statistics for \code{col}, \code{row}, and \code{slice} are updated via \link{update_var_smr}().

\itemize{
\item \code{col} and \code{row} store the 2D coordinates in voxel space.
\item \code{slice} stores the position along the third axis in the selected \code{plane}.
\item Attributes \code{"offset"}, \code{"offset_dist"}, \code{"offset_dir"}, and \code{"plane"}
describe the applied spatial offset and the original plane.
}
}
\examples{
vbl <- example_vbl()

vbl2D <- vibble2D(
  vbl = vbl,
  plane = "axi",
  slices = 90:100,
  offset_dist = 0.1,
  offset_dir = "left"
)

dplyr::glimpse(vbl2D)

}
\seealso{
\link{ggplane}(), \link{vbl_layer}(), \link{offset_attr}()
}
