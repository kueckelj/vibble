% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ggvibble-layers.R
\name{layer_mask}
\alias{layer_mask}
\title{Add a mask layer for logical variables}
\usage{
layer_mask(
  var,
  color,
  alpha = 0.25,
  fill = TRUE,
  outline = TRUE,
  concavity = 2.5,
  nv = 50,
  slices = NULL,
  cond = NULL,
  ...
)
}
\arguments{
\item{var}{Character. Must refer to a column in the
\link{vibble} containing \code{TRUE}/\code{FALSE} mask values.}

\item{color}{Color used for the mask fill and outline.}

\item{alpha}{Controls the fill transparency. May be a single value in \verb{[0,1]},
a numeric vector of length two, or an expression evaluated with
\link[rlang:args_data_masking]{tidyverse's data-masking} semantics.
See \link[=ggvible_doc_alpha]{Details} for more information.}

\item{fill}{Logical. If \code{TRUE}, draw a filled raster layer over mask voxels.}

\item{outline}{Logical. If \code{TRUE}, draw polygon outlines around connected
mask regions.}

\item{concavity}{Numeric passed to \link{concaveman}() to control the shape
of the concave hull used for outlines.}

\item{nv}{Integer. Number of vertices used by \code{densify_poly()} to densify each
polygon outline.}

\item{slices}{Optional numeric vector of slice indices on which this layer
should be drawn. This restricts the layer at the slice level, in contrast to
\code{cond}, which restricts the layer at the voxel level.

If \code{NULL}, the layer is applied to all slices included in the corresponding
\link{ggplane}() call.}

\item{cond}{Optional logical filter expression that determines the specific
voxels on which this layer is drawn. This allows fine-grained, voxel-level
filtering beyond whole-slice selection. The expression is evaluated with
\link[rlang:args_data_masking]{tidyverse's data-masking} semantics
on the \link{vibble2D}() passed into the layer by the \link{ggplane}() call.
See \link[=ggvibble_doc_cond]{Details} for more information and examples.

If \code{NULL}, the layer is drawn for all voxels included in the corresponding
\link{ggplane}() call.}

\item{...}{Additional arguments passed to \link{geom_polygon}() for the outline.}
}
\value{
A \code{ggvibble_layer} object containing the supplied function. When
added to a \code{ggvibble}, the function is executed and its returned layers are
inserted into the plot.
}
\description{
Overlay a logical mask variable on a \code{ggplane()} plot by filling
voxels and/or drawing polygon outlines around mask regions.
}
\examples{
vbl <- example_vbl()

p <- ggplane(
  vbl = vbl,
  plane = "axi",
  slices = 90,
  var = "raw_t1"
)

# Filled mask overlay
p + layer_mask(var = "tumor", color = "red")

# Outline only
p + layer_mask(var = "tumor", color = "red", fill = FALSE, outline = TRUE)

}
\seealso{
\link{ggplane}(), \link{layer_label}(), \link{layer_bb}(),
}
