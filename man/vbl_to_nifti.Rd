% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/vibble-io-nifti.R
\name{vbl_to_nifti}
\alias{vbl_to_nifti}
\title{Convert vibble variable to NIfTI object.}
\usage{
vbl_to_nifti(
  vbl,
  var,
  orientation = "RAS",
  missing = 0,
  datatype = NULL,
  verbose = vbl_opts("verbose")
)
}
\arguments{
\item{vbl}{A \link[=vbl_doc_vbl]{vibble}.}

\item{var}{Character scalar. Name of a variable in \code{vbl} to be
converted into a NIfTI volume.}

\item{orientation}{Character scalar. Three-letter orientation string
specifying axis directions (e.g. \code{"RAS"}, \code{"LPI"}).}

\item{missing}{Numeric scalar. Value used to fill voxels that are missing
in the vibble.}

\item{datatype}{Integer scalar. NIfTI datatype code. If \code{NULL}, the datatype
is inferred automatically from the variable content.}

\item{verbose}{Logical. If \code{TRUE}, informative messages are printed in the
console.}
}
\value{
A \code{oro.nifti} object containing the voxel data and basic spatial metadata.
}
\description{
\code{vbl_to_nifti()} converts a single non-ccs variable of a vibble into an
in-memory NIfTI object. Voxel values are taken from the vibble, arranged
according to the requested orientation, and written into a NIfTI volume
with minimal but valid spatial header information.
}
\details{
If \code{datatype} is not explicitly provided, it is inferred from the vibble
variable content using \code{.infer_datatype()}.

Voxel spacing (\code{pixdim}) is derived from the vibble coordinate step sizes
and reordered to match the specified orientation. A simple diagonal
voxel-to-world transform is written to both sform and qform to ensure that
the orientation is well-defined. No attempt is made to recover real scanner
geometry beyond voxel spacing and axis orientation.
}
\keyword{internal}
