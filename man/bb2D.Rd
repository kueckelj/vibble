% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/vibble-space.R
\name{bb2D}
\alias{bb2D}
\title{Compute 2D bounding boxes per slice}
\usage{
bb2D(vbl2D, cond = enquo(), slices = NULL, buffer = 0, mask = "cond")
}
\arguments{
\item{vbl2D}{A \link{vibble2D}.}

\item{cond}{Optional filter condition evaluated in the context of \code{vbl2D}.
Use an unquoted expression, for example \code{cond = tumor == TRUE}.
If omitted, all rows are considered.}

\item{slices}{Optional numeric vector of slice indices to include.
If not numeric or \code{NULL}, all slices present in \code{vbl2D$slice} are used.}

\item{buffer}{Numeric vector of length one or two defining the non-negative buffer added to the
column and row ranges.
If a single value is supplied, it is recycled to both axes.
Values are interpreted in the units of \code{col} and \code{row}.}

\item{mask}{Character scalar stored in the output column \code{mask} to label the bounding boxes.}
}
\value{
A tibble with one row per slice and the following columns.
\itemize{
\item \code{mask}: The mask label passed via \code{mask}.
\item \code{plane}: The plane of the input \code{vbl2D} as returned by \code{plane(vbl2D)}.
\item \code{slice}: Slice index.
\item \code{cmin}, \code{cmax}: Minimum and maximum column coordinates after buffering.
\item \code{rmin}, \code{rmax}: Minimum and maximum row coordinates after buffering.
}
}
\description{
Compute per-slice 2D bounding boxes from a \code{vbl2D} object based on its \code{col} and \code{row} coordinates.
Optionally filter voxels, restrict to selected slices, and expand boxes by a buffer.
}
\details{
The function first filters \code{vbl2D} using \code{cond} if provided.
If \code{slices} is not numeric, the set of slices is derived from the unique values in \code{vbl2D$slice}.
For each slice, the range of \code{col} and \code{row} is computed and expanded symmetrically by the given buffer.

The buffer must be non-negative and of length one or two.
If a single value is provided, it is used for both the column and row directions.
The resulting bounding boxes are returned as a tibble that can be used, for example, by plotting helpers
such as \code{layer_bb()}.
}
\examples{
vbl <- example_vbl()
vbl2D <- vibble2D(vbl, plane = "axi", slices = 60:62)

# Example 1: Bounding boxes per slice for all voxels
bb_all <- bb2D(vbl2D)

# Example 2: Bounding boxes for brain mask with a buffer of 2 units
bb_brain <- bb2D(vbl2D, cond = brain == TRUE, buffer = 2, mask = "brain")

}
\seealso{
\link{bb3D}() for 3D bounding boxes.
\link{plane}() for accessing the plane attribute of a \code{vbl2D} object.
\link{layer_bb}() for drawing bounding boxes in 2D plots.
}
