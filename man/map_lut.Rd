% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/lut.R
\name{map_lut}
\alias{map_lut}
\title{Map integer-coded voxel values to factor labels using a lookup table}
\usage{
map_lut(vbl, var, lut, ordered = FALSE, var_out = var, verbose = TRUE)
}
\arguments{
\item{vbl}{A \link{vibble}.}

\item{var}{Character. Name of the integer-coded variable to remap.}

\item{lut}{Either a file path to a LUT, character vector of labels or a data.frame with integer indices
and character labels.}

\item{ordered}{Logical. If \code{TRUE}, the resulting factor is ordered. Defaults to \code{FALSE}.}

\item{var_out}{Character. Output variable name. Defaults to the same name as \code{var}.}
}
\value{
The input vibble with a new or replaced factor variable containing mapped
labels.
}
\description{
Replace an integer-coded variable in a vibble with a factor whose levels
are defined by a lookup table (LUT). The LUT may be provided as a character
vector or as a two-column data.frame.
}
\details{
The function first verifies that the input variable contains integer-
interpretable values. A character LUT is interpreted as an ordered sequence
of labels (with indices \code{1:length(lut)}), whereas a data.frame LUT must have
a numeric integer first column and a character second column. All LUT labels
must be unique.

Any integer values present in \code{vbl[[var]]} but missing from the LUT produce
a warning. The variable is then recoded by joining its integer values with
the LUT and converting the resulting labels into a factor with the specified
ordering. The recoded variable is stored in \code{var_out}, which defaults to
\code{var}.
}
\section{LUT handling}{

\itemize{
\item \strong{Character LUT}
Treated as:
\preformatted{
  index = 1:length(lut)
  label = lut
  }
All labels must be unique.

\item \strong{data.frame LUT}
Must contain at least two columns. The first must be numeric integer
indices, the second unique character labels. Additional columns are
ignored.

\item \strong{Missing LUT entries}
Integer values present in the variable but absent from the LUT trigger a
warning; these entries receive \code{NA} labels after joining.
}
}

\examples{
\dontrun{
# Using a character LUT: indices 1,2,3 map to labels A,B,C
map_lut(vbl, var = "seg", lut = c("A", "B", "C"), ordered = TRUE)

# Using a data.frame LUT
lut_df <- data.frame(
  index = c(1, 2, 5),
  label = c("GM", "WM", "CSF")
)
map_lut(vbl, "tissue", lut = lut_df, ordered = FALSE)
}

}
