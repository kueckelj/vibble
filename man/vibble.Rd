% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/vibble-doc.R
\docType{class}
\name{vibble}
\alias{vibble}
\title{Vibble objects}
\description{
A vibble is a voxel-level data structure (tibble/data.frame) that represents
one or more 3D volumes registered to the same space in long format. Each row corresponds to a single voxel,
identified by integer coordinates, and each additional column stores voxel-wise
values (e.g. intensities, masks, labels, scores).
}
\details{
A vibble is implemented as a tibble or data.frame with an additional class
\code{vbl} and a set of required columns and attributes. Conceptually, it is a
tidy representation of NIfTI-like volumes:
\itemize{
\item Each row = one voxel.
\item Each voxel is addressed by integer coordinates.
\item Each non-coordinate column stores a voxel-level variable.
}
}
\section{Required columns}{

A vibble must contain at least the following columns:
\itemize{
\item \code{x}, \code{y}, \code{z}: integer voxel coordinates in a
Cartesian grid.
\item At least one additional column with voxel values (numeric, logical,
factor, or character).
}
The coordinate triplet (\code{x}, \code{y}, \code{z}) should uniquely identify
each row.
}

\section{Class and attributes}{

Vibbles have class \code{c("vbl", <underlying class>)} and typically carry
the following attributes:
\itemize{
\item \code{orientation_orig}: character string describing the original
image orientation (e.g. from \code{RNifti::orientation()}).
\item \code{ccs_limits}: list of length three containing the coordinate
ranges for \code{x}, \code{y}, \code{z}.
\item \code{ccs_mapping}: named list mapping \code{x}, \code{y}, \code{z}
to anatomical axes (e.g. L/R, A/P, S/I).
\item \code{nifti}: the NIfTI object used to create the vibble without
slot @.Data for backwards compatibility.
\item \code{var_smr}: named list with per-variable summaries; each entry
is typically created by \link{summarize_var}.
}

Additional attributes can be used to store image-space information (e.g.
voxel spacing, reference NIfTI header) depending on the package design.
}

\section{Requirements and invariants}{

Functions operating on vibbles usually assume:
\itemize{
\item \code{x}, \code{y}, \code{z} are integer-valued and form a regular
3D grid.
\item Coordinate ranges in \code{ccs_limits} match the observed ranges of
\code{x}, \code{y}, \code{z}.
\item \code{ccs_mapping} and \code{orientation_orig} are consistent with
the original image space.
\item \code{var_smr} entries (if present) are in sync with the current
columns, especially after variable creation or removal.
}
}

\seealso{
\code{\link{nifti_to_voxel_df}} for creating a vibble from a NIfTI image,
\code{\link{update_var_smr}} for refreshing \code{var_smr}.
}
