% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/vibble-doc.R
\docType{class}
\name{vibble}
\alias{vibble}
\title{Vibble objects}
\description{
A vibble is a voxel-level tidy-data structure (tibble/data.frame) that represents
one or more 3D volumes registered to the same space.

\itemize{
\item{Rows}{ correspond to voxels, identified by integer coordinates.}
\item{Columns}{ store voxel-wise values (e.g. intensities, masks, labels, scores).}
}

Every column is referred to as variable in tidy-data terms. A vibble knows four types of variables:

\itemize{
\item{Spatial:}{ Variables with \emph{fixed naming} x, y and z give the unique position of each voxel in the 3D space.
They serve as both, for spatial localization and as a unique identifier.}
\item{Label:}{ Variables of class \link{factor} storing categorical classifications or ordinal scores.}
\item{Mask:}{ Variables of class \link{logical} storing binary information.}
\item{Numeric:}{ Variables of class \link{numeric} storing information that can be interpreted on a continuous numeric scale.}
}

Label, mask and numeric variables are referred to as \link[=vars_data]{data variables}. Spatial variables
x, y, and z are referred to as \link[=vars_spatial]{spatial variables}.

For a vibble to be valid, the following requirements must hold.
}
\section{Required class}{

Vibbles extent the \link[tibble:tibble]{tbl} class with \code{c("vbl", <underlying class>)}.
}

\section{Required columns}{

A vibble must contain at least the following columns:
\itemize{
\item{ \code{x}, \code{y}, \code{z}: integer voxel coordinates in a
Cartesian grid. This coordinate triplet must uniquely identify each row.}
\item{ One additional column with voxel values (label, mask or numeric) }.
}
}

\section{Required spatial mapping}{

The spatial information hold by the \code{x}, \code{y} and \code{z} variables is fixed and
maps to the anatomical axes as follows:

\itemize{
\item{x:}{ Gives the integer position of a voxel along the right-left-axis. Increasing values move
the voxel towards the \strong{left}.}
\item{y:}{ Gives the integer position of a voxel along the superior-inferior-axis. Increasing values move
the voxel towards \strong{inferior}.}
\item{z:}{ Gives the integer position of a voxel along the anterior-posterior-axis. Increasing values move
the voxel towards \strong{posterior}.}
}

Accordingly, XYZ in a Cartesian coordinate system map to LIP in voxel orientation code.
}

\section{Required attributes}{

A vibble must contain the following attributes:
\itemize{
\item \code{ccs_mapping}: named list mapping \code{x}, \code{y}, \code{z}
to anatomical axes (x = L, y = I, z = P). This is fixed and cannot be changed.
\item \code{ccs_limits}: list of length three containing the coordinate
ranges for \code{x}, \code{y}, \code{z} as valid \link[=is_limit]{limits}. They define
the space in which the volume-data lives. Vibbles can only be \link[=join_vibbles]{joined} if their space is equal.
\item \code{var_smr}: named list with per-variable summaries; each entry
is created by \link{summarize_var}() upon initial creation of the variable
and is used for comprehensive mapping of color schemes and statistical
analysis in the absence of the whole data set.
}
}

\section{Optional attributes}{

A vibble usually contains the following attributes:
\itemize{
\item \code{orientation_orig}: character string describing the original
image orientation (e.g. from \code{RNifti::orientation()}).
\item \code{nifti}: the NIfTI object used to create the vibble without
slot @.Data for facilitated backwards compatibility.
}
}

\section{Behaviour}{

A vibble behaves in almost all regards like a tibble. There are only two aspects
that are hardcoded:
\enumerate{
\item{Spatial variables x, y and z can not be renamed, removed or manipulated.}
\item{Vibble attributes remain unchanged / are restored after grouped dplyr operations.}
}
}

\seealso{
\link{nifti_to_vbl}() for creating a vibble from a NIfTI image,
\link{update_var_smr}() for refreshing \code{var_smr}.
}
